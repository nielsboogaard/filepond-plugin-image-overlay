/*!
 * FilePondPluginImageOverlay 1.0.9
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit undefined for details.
 */

/* eslint-disable */

!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(e="undefined"!=typeof globalThis?globalThis:e||self).FilePondPluginImageOverlay=n()}(this,(function(){"use strict";const e=e=>/^image/.test(e.type),n=e=>{let n=document.createElement("span");return n.className="filepond--magnify-icon",n.title=e,n},t=e=>{const n=document.createElement("div");n.className="filepond--fullsize-overlay";const t=document.createElement("div"),o=URL.createObjectURL(e.file);t.className="image-container",t.style.backgroundImage="url("+o+")",i(o,t);let l=document.getElementsByTagName("body")[0];n.appendChild(t),l.appendChild(n),n.addEventListener("click",(()=>n.remove()))},i=(e,n)=>{const t=Math.max(document.documentElement.clientWidth,window.innerWidth||0),i=Math.max(document.documentElement.clientHeight,window.innerHeight||0);((e,n)=>{let t=new Image;t.onload=()=>{const e=t.naturalWidth,i=t.naturalHeight;t=null,n(e,i)},t.src=e})(e,((e,o)=>{(e>t||o>i)&&(n.style.backgroundSize="contain")}))},o=i=>{const{addFilter:o,utils:l}=i,{Type:d,createRoute:a}=l;return o("CREATE_VIEW",(i=>{const{is:o,view:l,query:d}=i;if(!o("file"))return;l.registerWriter(a({DID_LOAD_ITEM:({root:i,props:o})=>{const{id:l}=o,a=d("GET_ITEM",l);if(!a||a.archived||!e(a.file))return;const c=i.query("GET_LABEL_BUTTON_IMAGE_OVERLAY"),r=i.query("GET_ALLOW_CLICK_PREVIEW_TO_SHOW_IMAGE_OVERLAY");((e,i,o,l)=>{const d=i.querySelector(".filepond--file-info"),a=i.querySelector(".filepond--file-info-main"),c=n(o);let r=i.querySelector(".filepond--file-info-main-container");r||(r=document.createElement("div"),r.className="filepond--file-info-main-container",r.append(a),d.prepend(r)),r.prepend(c),c.addEventListener("click",(()=>t(e))),l&&window.setTimeout((()=>{const n=i.querySelector(".filepond--image-preview");n&&(n.classList.add("clickable"),n.addEventListener("click",(()=>t(e))))}),1e3)})(a,i.element,c,r),i.dispatch("DID_MEDIA_PREVIEW_CONTAINER_CREATE",{id:l})}},(({root:n,props:t})=>{const{id:i}=t,o=d("GET_ITEM",i);e(o.file)&&n.rect.element.hidden})))})),{options:{labelButtonImageOverlay:["Open image in overlay",d.STRING],allowClickPreviewToShowImageOverlay:[!0,d.BOOLEAN]}}};return"undefined"!=typeof window&&void 0!==window.document&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:o})),o}));
